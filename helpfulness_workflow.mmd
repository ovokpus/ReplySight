graph TD
    START([ğŸš€ Start]) --> agent[ğŸ§  Smart Study Buddy Agent]
    
    agent --> decision{ğŸ¤” 3 Important Decisions}
    
    %% Decision 1: Do I need tools?
    decision -->|"ğŸ“š Decision 1:<br/>Do I need to use tools?"| action[ğŸ” Research Action<br/>ArXiv + Tavily]
    
    %% Decision 2: Have I talked too much?
    decision -->|"ğŸ’¬ Decision 2:<br/>More than 10 messages?"| END1([ğŸ›‘ End - Enough Chatting])
    
    %% Decision 3: Is my answer good enough?
    decision -->|"â­ Decision 3:<br/>Is my answer helpful?"| helpful{ğŸ¯ Helpfulness Check<br/>GPT-4o-mini Evaluator}
    
    %% Helpfulness evaluation paths
    helpful -->|"âœ… Score â‰¥ 0.7<br/>Good enough!"| END2([ğŸ‰ End - Success])
    helpful -->|"âŒ Score < 0.7<br/>Try again!"| agent
    
    %% Action flow
    action --> process[ğŸ“Š Process Results<br/>Extract Research Data]
    process --> agent
    
    %% Styling
    classDef startEnd fill:#e1f5fe
    classDef agent fill:#f3e5f5
    classDef decision fill:#fff3e0
    classDef action fill:#e8f5e8
    classDef process fill:#fce4ec
    
    class START,END1,END2 startEnd
    class agent agent
    class decision,helpful decision
    class action action
    class process process 